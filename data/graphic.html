<!DOCTYPE html>
<html>

<head>
    <title>ESP8266 Humidity Logger</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>
    <link rel="icon" type="image/png" sizes="144x144" href="/favicon-144x144.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#00878f">
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'>
    //<script  src="Chart.min.js"></script>

    <script src="graphic.js"></script>
    <script src="moment.min.js"></script>
</head>

<body>
 
    <center>
   
       
             
                <canvas id="canvasGraphic" width="300" height="301" padding="50">No canvas in your browser...sorry...</canvas>
       			<script>
       						var timeFormat = 'MM/DD/YYYY HH:mm';
       								var color = Chart.helpers.color;
       				//var ctx = document.getElementById('canvasGraphic').getContext('2d');

	var config = {
			type: 'line',
			data: {
				labels: [ // Date Objects
					 11111111, 11111114,11111113
				],
				datasets: [{
					label: 'My First dataset',
					//backgroundColor: color("red").alpha(0.5).rgbString(),
					//borderColor: color(,
					fill: false,
					data: [
						15,12,13
					],
				}, {
					label: 'My Second dataset',
					//backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
					//borderColor: window.chartColors.blue,
					fill: false,
					data: [
						14,8,21
					],
				}]
			},
			options: {
				title: {
					text: 'Chart.js Time Scale'
				},
				scales: {
					xAxes: [{
						type: 'time',
						time: {
							parser: timeFormat,
							// round: 'day'
							tooltipFormat: 'll HH:mm'
						},
						scaleLabel: {
							display: true,
							labelString: 'Date'
						}
					}],
					yAxes: [{
						scaleLabel: {
							display: true,
							labelString: 'value'
						}
					}]
				},
			}
		};

var myChart;

var datos = parseCSV("time,relay,temp,analog\n11111111,0,20,7\n11111122,0,21,7.5\n11111133,0,22.5,8\n");


window.onload = function() {
			var ctx = document.getElementById('canvasGraphic').getContext('2d');
			window.myChart = new Chart(ctx, config);

		};


function loadCSV() {
	var xmlhttp = new XMLHttpRequest();
	xmlhttp.onreadystatechange = function() {
		if (this.readyState == 4 && ( this.status == 200  || this.status == 404 ) ) {
			dataArray = parseCSV(this.responseText);
			return dataArray;

		}
	};
	xmlhttp.open("GET", "dataLog.csv", true);
	xmlhttp.send();
}


function parseCSV(string) {
	var array = [];
	var lines = string.split("\n");
	for (var i = 0; i < lines.length; i++) {
		var data = lines[i].split(",");
		array.push(data);
	}
	return array;
}


</script>

    </center>



    </style>
</body>

</html>
